<odoo>
    <data>
        <record id="view_order_form_inherited" model="ir.ui.view">
            <field name="name">sale.order.form.inherited</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <field name="partner_id" position="after">
                    <field name="doctor_sale_id"/>
                </field>
                <xpath expr="//button[@id='create_invoice']" position="attributes">
                    <attribute name="invisible">state != 'dis_change'</attribute>
                </xpath>
                <!-- Do the same for the 'Create Invoice Percentage' if necessary -->
                <xpath expr="//button[@id='create_invoice_percentage']" position="attributes">
                    <attribute name="invisible">state != 'dis_change'</attribute>
                </xpath>

                <xpath expr="//button[@name='action_draft']" position="attributes">
                    <attribute name="string">Set To Reception</attribute>
                </xpath>
                <xpath expr="//button[@name='action_confirm']" position="before">

                    <button type="object" name="action_endoscopy" string="Endoscopy" class="btn-primary"
                            invisible="state != 'sale'"/>

                    <button name="action_create_medical_endoscopes" string="Create Medical Endoscopes" type="object"
                            class="btn-primary"/>


                    <button type="object" name="action_post_recovery" string=" Post Recovery" class="btn-primary"
                            invisible="state != 'endoscopy'"/>

                    <button type="object" name="action_discharge" string=" Discharge" class="btn-primary"
                            invisible="state != 'post_recovery'"/>

                </xpath>
                <xpath expr="//div[@name='button_box']" position="inside">
                    <button type="object"
                            name="action_view_medical_endoscopes"
                            class="oe_stat_button"
                            icon="fa-stethoscope">
                        <field string="Endoscopes" name="medical_endoscope_count" widget="statinfo"/>
                    </button>
                </xpath>
                <xpath expr="//field[@name='payment_term_id']" position="after">
                    <field name="endoscopy_date" invisible="not endoscopy_date"/>
                    <field name="post_recovery_date" invisible="not post_recovery_date"/>
                    <field name="dis_change_date" invisible="not dis_change_date"/>
                </xpath>
                <xpath expr="//field[@name='state']" position="replace">
                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,sent,sale,endoscopy,post_recovery,dis_change"/>
                </xpath>
            </field>
        </record>
        <!-- Inherit the existing search view for sales orders -->
        <record id="view_sales_order_filter_inherit" model="ir.ui.view">
            <field name="name">sale.order.list.select.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="inside">
                    <field name="partner_id" string="Customer Phone"
                           filter_domain="[('partner_id.phone', 'ilike', self)]"/>
                </xpath>
                <filter name="my_sale_orders_filter" position="after">

<!--                    <filter string="Today's Quotations" name="todays_quotations"-->
<!--                            />-->
                </filter>
            </field>
        </record>


        <record id="view_partner_doctor_form" model="ir.ui.view">
            <field name="model">res.partner</field>
            <field name="name">view.partner.doctor.form</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='category_id']" position="after">
                    <field name="is_doctor" widget="boolean_toggle"/>
                    <field name="birth_date" placeholder="Birth Date"/>
                    <field name="member_age" readonly="1" force_save="1"/>
                </xpath>

                <xpath expr="//field[@name='category_id']" position="attributes">
                    <attribute name="string">Refery by</attribute>
                </xpath>
                <xpath expr="//field[@name='vat']" position="before">
                    <!--                    <field name="nationality_cust"/>-->
                    <field name="nationality_country_id" options="{'no_create': True, 'no_open': True}"/>
                </xpath>
            </field>
        </record>

    </data>
</odoo>